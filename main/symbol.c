
#include "LPC17xx.h"
#include "lpc17xx_pinsel.h"
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "pin.h"
#include "lpc17xx_ssp.h"
#include "lpc17xx_gpio.h"
#include "lpc17xx_timer.h"
#include "lpc17xx_i2c.h"
#include "lpc17xx_nvic.h"
#include "PCD8544.h"
#include "time.h"
#include "LCD.h"
#include "motion.h"
#include "symbol.h"

#define x 2 //port 2
#define y 0 //port 0
#define READY 3

static int scanning=FALSE;
static int oldx = -1;	//previous values, constantly updated when there is a continuous gesture,
static int oldy = -1;  	//reset after a short idle
static int command=IDLE;

static int leftCount =  0;
static int rightCount = 0;
static int upCount = 0;
static int downCount = 0;

//3D array
int static defined_number[57][8][8] = {

										{
										{0,0,1,1,1,1,1,0},
										{0,1,1,1,0,0,1,1},
										{0,1,1,0,0,0,1,1},
										{0,1,0,0,0,0,1,1},
										{0,1,0,0,0,0,1,1},
										{0,1,1,0,1,0,1,0},
										{0,0,1,1,1,0,0,0},
										{0,0,0,0,0,0,0,0}
										},

										{
										{0,0,0,0,0,0,0,0},
										{0,0,1,1,1,1,0,0},
										{0,1,1,0,0,1,1,0},
										{1,1,0,0,0,1,1,0},
										{1,0,0,0,1,1,1,0},
										{1,0,0,0,1,1,0,0},
										{0,0,1,1,1,0,0,0},
										{0,0,0,0,0,0,0,0}
										},

										{
										{0,0,0,0,0,0,0,0},
										{0,0,1,1,1,1,0,0},
										{0,1,1,0,1,1,1,0},
										{1,1,0,0,0,1,1,0},
										{1,0,0,0,0,0,1,0},
										{1,0,0,0,1,0,1,0},
										{0,0,1,1,1,0,0,0},
										{0,0,1,1,0,0,0,0}
										},

										{
										{0,0,0,0,0,0,0,0},
										{0,0,0,0,0,1,1,1},
										{0,0,0,0,1,1,1,1},
										{0,0,0,1,1,0,1,1},
										{0,0,0,1,1,0,0,1},
										{0,0,0,1,1,0,1,1},
										{0,0,0,1,1,0,1,1},
										{0,0,0,0,0,0,0,0}
										},

										{
										{0,0,0,0,0,0,0,0},
										{0,0,1,1,0,0,0,0},
										{1,1,1,1,0,0,0,0},
										{1,0,0,1,0,0,0,0},
										{1,0,0,1,0,0,0,0},
										{1,0,1,1,0,0,0,0},
										{1,0,1,0,0,0,0,0},
										{0,0,0,0,0,0,0,0}
										},//zero

										{
										{0,0,0,1,0,0,0,0},
										{0,0,0,1,0,0,0,0},
										{0,0,0,1,0,0,0,0},
										{0,0,0,1,0,0,0,0},
										{0,0,0,1,0,0,0,0},
										{0,0,0,1,0,0,0,0},
										{0,0,0,1,0,0,0,0},
										{0,0,0,1,0,0,0,0}
										},

										{
										{0,0,0,0,0,0,1,0},
										{0,0,0,0,0,0,1,0},
										{0,0,0,0,0,0,1,0},
										{0,0,0,0,0,0,1,1},
										{0,0,0,0,0,0,1,1},
										{0,0,0,0,0,0,1,1},
										{0,0,0,0,0,0,1,1},
										{0,0,0,0,0,0,1,1}
										},

										{
										{0,0,0,0,0,1,0,0},
										{0,0,0,0,0,1,0,0},
										{0,0,0,0,0,1,0,0},
										{0,0,0,0,1,1,0,0},
										{0,0,0,0,1,1,0,0},
										{0,0,0,0,1,1,0,0},
										{0,0,0,0,1,1,0,0}
										},

										{
										{0,0,0,0,1,0,0,0},
										{0,0,0,0,1,0,0,0},
										{0,0,0,0,1,0,0,0},
										{0,0,0,0,1,0,0,0},
										{0,0,0,0,1,0,0,0},
										{0,0,0,0,1,0,0,0},
										{0,0,0,0,1,0,0,0},
										{0,0,0,0,1,0,0,0}
										},

										{
										{1,1,0,0,0,0,0,0},
										{1,1,0,0,0,0,0,0},
										{1,1,0,0,0,0,0,0},
										{1,0,0,0,0,0,0,0},
										{1,0,0,0,0,0,0,0},
										{1,0,0,0,0,0,0,0},
										{1,0,0,0,0,0,0,0},
										{1,0,0,0,0,0,0,0}
										},//one

										{
										{0,0,1,1,1,0,0,0},
										{0,1,1,0,1,1,0,0},
										{1,1,0,0,0,1,0,0},
										{1,0,0,1,1,1,0,0},
										{0,0,0,1,1,1,0,0},
										{0,0,1,1,0,0,0,0},
										{1,0,1,1,1,0,1,1},
										{0,0,0,0,0,0,0,0}
										},

										{
										{0,0,0,0,0,0,0,0},
										{0,0,1,1,1,1,1,0},
										{0,1,1,0,0,1,1,0},
										{1,1,0,1,1,1,1,0},
										{0,0,0,1,1,1,0,0},
										{0,0,1,1,0,0,0,0},
										{1,0,1,1,1,0,1,0},
										{0,0,0,0,0,0,0,0}
										},

										{
										{0,0,0,0,0,0,0,0},
										{0,1,1,1,1,1,1,0},
										{1,1,1,0,0,1,1,0},
										{0,0,0,1,1,1,1,0},
										{0,0,1,1,1,0,0,0},
										{1,1,1,0,1,0,1,1},
										{1,0,1,1,1,0,1,1},
										{0,0,0,0,0,0,0,0}
										},

										{
										{0,0,0,0,0,0,0,0},
										{0,1,1,1,1,1,0,0},
										{0,1,1,0,0,1,1,0},
										{1,1,0,1,1,1,1,0},
										{0,0,0,1,1,1,0,0},
										{0,0,1,1,0,0,0,0},
										{1,0,1,1,1,0,1,1},
										{0,0,0,0,0,0,0,0}
										},

										{
										{0,0,0,0,0,0,0,0},
										{0,1,1,1,1,1,1,0},
										{1,1,0,0,0,1,1,0},
										{1,0,0,1,1,1,1,0},
										{0,0,1,1,1,1,0,0},
										{0,1,1,0,0,0,0,0},
										{1,0,1,1,1,0,1,1},
										{0,0,0,0,0,0,0,0}
										},//two

										{
										{0,0,0,1,1,0,0,0},
										{0,1,1,1,1,1,1,0},
										{0,1,0,0,0,0,1,0},
										{0,0,0,1,1,1,1,1},
										{0,0,0,0,0,0,1,1},
										{1,0,0,0,0,0,1,1},
										{1,0,1,0,1,0,1,1},
										{0,0,1,1,1,0,0,0}
										},

										{
										{0,0,0,1,1,0,0,0},
										{0,1,1,1,1,1,0,0},
										{0,1,1,0,1,1,0,0},
										{0,0,0,1,1,1,1,1},
										{0,0,0,0,0,1,1,1},
										{1,0,0,0,0,0,1,1},
										{1,0,1,1,1,0,1,1},
										{0,0,0,0,0,0,0,0}
										},

										{
										{0,0,0,0,0,0,0,0},
										{0,1,1,1,1,1,0,0},
										{1,1,0,0,1,1,0,0},
										{0,0,0,1,1,1,1,1},
										{1,0,0,0,1,1,1,1},
										{1,1,1,1,1,1,1,1},
										{0,0,1,1,1,0,0,0},
										{0,0,0,0,0,0,0,0}
										},

										{
										{0,0,0,0,0,0,0,0},
										{0,1,1,1,1,1,0,0},
										{0,1,0,0,1,1,0,0},
										{0,0,0,1,1,1,1,1},
										{1,0,0,0,0,1,1,1},
										{1,0,1,1,1,0,1,1},
										{0,0,1,1,1,0,0,0},
										{0,0,0,0,0,0,0,0}
										},

										{
										{0,0,1,1,1,0,0,0},
										{0,1,1,0,1,1,0,0},
										{1,1,0,0,0,1,1,0},
										{0,0,0,1,1,1,1,1},
										{0,0,0,1,1,1,1,1},
										{1,0,0,0,0,0,1,1},
										{1,0,1,1,1,0,1,0},
										{0,0,0,0,0,0,0,0}
										},//three

										{
										{0,1,0,0,0,0,0,0},
										{0,1,0,0,0,0,0,0},
										{0,1,0,0,0,1,0,1},
										{0,1,0,1,0,1,1,1},
										{0,1,1,1,1,1,1,1},
										{0,1,1,1,0,0,1,1},
										{0,0,0,0,0,0,1,0},
										{0,0,0,0,0,0,0,0}
										},

										{
										{0,1,0,0,0,0,0,0},
										{0,1,0,0,0,0,0,0},
										{0,1,0,0,0,1,0,0},
										{0,1,0,0,0,1,0,1},
										{1,1,1,1,1,1,1,1},
										{1,1,1,1,1,1,1,0},
										{0,0,0,0,0,0,0,0},
										{0,0,0,0,0,0,0,0}
										},

										{
										{0,1,0,0,0,0,0,0},
										{0,1,0,0,0,1,0,1},
										{0,1,0,0,0,1,0,0},
										{1,1,0,1,1,1,1,1},
										{1,1,1,1,1,1,1,1},
										{0,0,0,0,0,0,1,0},
										{0,0,0,0,0,0,1,0},
										{0,0,0,0,0,0,1,0}
										},

										{
										{0,0,0,0,0,0,0,0},
										{0,1,0,0,0,0,0,0},
										{0,1,0,0,0,0,0,0},
										{0,1,0,0,0,1,0,1},
										{0,1,0,0,0,1,1,1},
										{0,1,1,1,1,0,1,1},
										{0,0,0,0,0,0,1,1},
										{0,0,0,0,0,0,0,0}
										},

										{
										{0,1,0,0,0,0,0,0},
										{0,1,0,0,0,0,0,0},
										{0,1,0,0,0,1,0,0},
										{0,1,0,0,0,1,0,0},
										{0,1,0,0,0,1,1,1},
										{0,1,1,1,1,1,1,0},
										{0,0,0,0,0,1,1,0},
										{0,0,0,0,0,0,0,0}
										},//four

										{
										{0,0,0,0,0,0,1,1},
										{0,1,1,1,1,1,1,1},
										{0,1,0,0,0,0,0,0},
										{0,1,1,1,1,1,1,1},
										{0,1,0,0,0,1,1,1},
										{1,0,1,0,1,0,1,1},
										{0,0,1,1,1,0,0,0},
										{0,0,0,0,0,0,0,0}
										},

										{
										{0,0,0,0,0,0,0,0},
										{0,1,1,1,1,1,1,1},
										{0,1,0,0,0,0,0,0},
										{0,1,1,1,1,1,1,1},
										{1,1,0,0,0,0,1,1},
										{1,1,1,1,1,0,1,1},
										{0,0,0,1,1,0,0,0},
										{0,0,0,0,0,0,0,0}
										},

										{
										{0,0,0,0,0,0,0,0},
										{0,1,1,1,1,1,1,0},
										{0,1,0,0,0,0,0,0},
										{0,1,1,1,1,1,1,1},
										{1,1,0,0,0,0,1,1},
										{1,1,1,1,1,0,1,1},
										{0,0,0,1,1,0,0,0},
										{0,0,0,0,0,0,0,0}
										},

										{
										{0,0,0,0,0,0,0,0},
										{0,1,1,1,1,1,1,0},
										{0,1,0,0,0,0,0,0},
										{0,1,1,1,1,1,1,1},
										{1,0,0,0,0,1,1,1},
										{1,1,1,1,1,0,1,1},
										{0,0,1,1,1,0,0,0},
										{0,0,0,0,0,0,0,0}
										},

										{
										{0,0,0,0,0,0,0,0},
										{0,1,1,1,1,1,0,0},
										{0,1,0,0,0,0,0,0},
										{1,1,1,1,1,1,1,1},
										{1,1,0,0,0,0,1,1},
										{1,0,1,0,0,0,1,1},
										{0,0,1,1,1,0,1,1},
										{0,0,0,0,0,0,0,0}
										},//five


										{
										{0,0,0,1,1,0,0,0},
										{0,0,0,1,0,0,0,0},
										{0,0,1,1,1,1,0,0},
										{0,0,1,1,1,1,1,0},
										{0,0,1,0,0,0,1,0},
										{0,0,1,0,0,0,1,0},
										{0,0,1,1,1,0,0,0},
										{0,0,0,0,0,0,0,0}
										},

										{
										{0,0,0,1,0,0,0,0},
										{0,0,1,1,0,0,0,0},
										{0,0,1,1,1,0,0,0},
										{0,1,1,1,1,1,0,0},
										{0,1,1,0,0,1,0,0},
										{0,1,0,0,1,1,0,0},
										{0,0,1,1,1,0,0,0},
										{0,0,1,1,0,0,0,0}
										},

										{
										{0,0,0,1,0,0,0,0},
										{0,0,1,1,0,0,0,0},
										{0,0,1,1,1,1,0,0},
										{0,1,1,1,1,1,1,0},
										{0,1,0,0,1,1,1,0},
										{0,0,1,0,1,1,0,0},
										{0,0,1,1,1,0,0,0},
										{0,0,0,0,0,0,0,0}
										},

										{
										{0,0,0,1,0,0,0,0},
										{0,0,1,1,0,0,0,0},
										{0,0,1,1,1,0,0,0},
										{0,0,1,1,1,1,0,0},
										{0,0,1,0,1,1,0,0},
										{0,0,1,0,1,0,0,0},
										{0,0,1,1,1,0,0,0},
										{0,0,0,0,0,0,0,0}
										},

										{
										{0,0,0,1,0,0,0,0},
										{0,0,0,1,0,0,0,0},
										{0,0,1,1,0,0,0,0},
										{0,0,1,1,1,1,0,0},
										{0,0,1,0,0,1,0,0},
										{0,0,1,0,1,1,0,0},
										{0,0,1,1,1,0,0,0},
										{0,0,0,1,0,0,0,0}
										},//six

										{
										{0,0,0,0,0,0,0,0},
										{0,1,1,1,1,1,1,0},
										{0,0,0,0,1,1,1,0},
										{0,0,1,1,1,1,1,0},
										{0,0,1,1,0,0,0,0},
										{0,0,1,0,0,0,0,0},
										{1,0,0,0,0,0,0,0},
										{0,0,0,0,0,0,0,0}
										},

										{
										{0,0,0,0,0,0,0,0},
										{0,1,1,1,1,1,1,0},
										{0,0,0,0,0,0,1,0},
										{0,0,0,0,0,0,1,1},
										{0,0,0,0,0,0,1,1},
										{0,0,0,0,0,0,1,1},
										{0,0,0,0,0,0,1,1},
										{0,0,0,0,0,0,0,0}
										},

										{
										{0,0,0,0,0,0,0,0},
										{1,1,1,1,1,0,1,0},
										{0,0,0,0,0,0,1,0},
										{0,0,0,0,0,0,1,1},
										{0,0,0,0,0,0,1,1},
										{0,0,0,0,0,0,1,1},
										{0,0,0,0,0,0,1,1},
										{0,0,0,0,0,0,0,0}
										},

										{
										{0,0,0,0,0,0,0,0},
										{1,1,1,1,1,1,1,0},
										{0,0,0,0,1,1,1,0},
										{0,0,1,1,1,1,1,0},
										{0,0,1,1,0,0,0,0},
										{0,0,1,0,0,0,0,0},
										{1,0,0,0,0,0,0,0},
										{1,0,0,0,0,0,0,0}
										},

										{
										{0,0,0,0,1,1,1,1},
										{1,1,1,1,1,1,1,1},
										{0,0,0,0,1,1,1,0},
										{0,0,0,1,1,1,1,0},
										{0,0,1,1,0,0,0,0},
										{0,0,1,0,0,0,0,0},
										{1,0,0,0,0,0,0,0},
										{0,0,0,0,0,0,0,0}
										},//seven

										{
										{0,0,0,1,0,0,0,0},
										{0,0,1,1,1,1,0,0},
										{0,0,1,1,0,1,0,0},
										{0,0,1,1,1,1,1,0},
										{0,0,0,0,1,1,1,0},
										{0,0,0,0,0,0,1,0},
										{0,0,1,1,1,0,0,0},
										{0,0,0,0,0,0,0,0}
										},

										{
										{0,0,0,1,1,0,0,0},
										{0,0,1,1,1,1,0,0},
										{0,1,1,0,1,1,0,0},
										{0,0,1,1,1,1,1,0},
										{0,0,1,1,1,1,1,1},
										{0,0,0,0,0,0,1,1},
										{0,0,1,1,1,0,1,0},
										{0,0,0,0,0,0,0,0}
										},

										{
										{0,0,0,0,0,0,0,0},
										{0,0,1,1,1,1,0,0},
										{0,1,1,0,0,1,0,0},
										{0,1,1,1,1,1,0,0},
										{0,1,1,1,1,1,1,0},
										{0,0,1,0,0,0,1,0},
										{0,0,1,1,1,0,0,0},
										{0,0,0,0,0,0,0,0}
										},

										{
										{0,0,0,0,0,0,0,0},
										{0,0,1,1,1,1,0,0},
										{0,0,1,0,0,1,0,0},
										{0,1,1,1,1,1,0,0},
										{1,0,1,1,1,1,0,0},
										{1,0,0,0,0,1,0,0},
										{1,0,1,1,1,0,0,0},
										{0,0,0,0,0,0,0,0}
										},

										{
										{0,0,0,0,0,0,0,0},
										{0,0,1,1,1,1,0,0},
										{0,0,1,0,0,1,0,0},
										{0,0,1,1,1,1,0,0},
										{1,0,1,1,1,1,0,0},
										{1,0,1,0,0,0,0,0},
										{0,0,1,1,1,0,0,0},
										{0,0,0,0,0,0,0,0}
										},//eight

										{
										{0,0,1,1,1,1,0,0},
										{0,0,1,0,0,1,0,0},
										{0,1,1,0,1,1,0,0},
										{0,1,1,1,1,1,0,0},
										{0,1,1,1,1,1,0,0},
										{0,0,0,0,0,1,0,0},
										{0,0,0,0,0,1,0,0},
										{0,0,0,0,0,1,0,0}
										},

										{
										{0,0,0,1,1,0,0,0},
										{0,1,1,1,1,0,0,0},
										{0,1,0,0,1,0,0,0},
										{0,1,1,1,1,1,0,0},
										{0,0,1,1,1,1,0,0},
										{0,0,0,0,1,1,0,0},
										{0,0,0,0,1,1,0,0},
										{0,0,0,0,1,1,0,0}
										},

										{
										{0,0,0,0,0,0,0,0},
										{0,0,0,1,1,1,0,0},
										{0,0,1,1,1,1,0,0},
										{0,0,1,1,1,1,0,0},
										{0,0,1,1,1,1,0,0},
										{0,0,0,0,0,1,0,0},
										{0,0,0,0,0,1,0,0},
										{0,0,0,0,0,1,0,0}
										},

										{
										{0,0,0,0,0,0,0,0},
										{0,0,1,1,1,1,0,0},
										{0,0,1,0,0,1,0,0},
										{0,1,1,1,1,1,0,0},
										{0,1,1,1,1,1,0,0},
										{0,0,1,1,0,1,0,0},
										{0,0,0,0,0,1,0,0},
										{0,0,0,0,0,0,0,0}
										},

										{
										{0,0,0,0,0,0,0,0},
										{0,0,1,1,1,1,0,0},
										{0,0,1,1,1,1,0,0},
										{0,1,1,1,1,1,0,0},
										{0,0,1,1,1,1,0,0},
										{0,0,0,0,0,1,0,0},
										{0,0,0,0,0,1,0,0},
										{0,0,0,0,0,1,0,0}
										},//nine

										{
										{1,0,0,0,0,0,1,1},
										{1,1,0,0,0,1,1,0},
										{0,1,1,1,1,1,0,0},
										{0,0,1,1,1,1,0,0},
										{0,0,1,1,1,0,0,0},
										{0,0,1,0,1,0,0,0},
										{1,0,0,0,0,0,1,1},
										{1,0,0,0,0,0,1,1}
										},

										{
										{1,0,0,0,0,0,1,1},
										{1,1,0,0,0,1,1,0},
										{0,1,1,1,1,1,0,0},
										{0,0,1,1,1,1,0,0},
										{0,0,1,1,1,0,0,0},
										{0,0,1,1,1,0,0,0},
										{1,0,0,0,0,0,1,1},
										{1,0,0,0,0,0,1,1}
										},

										{
										{0,0,0,0,0,0,1,1},
										{1,1,0,0,0,1,1,0},
										{0,1,1,1,1,1,0,0},
										{0,0,1,1,1,1,0,0},
										{0,0,1,1,1,0,0,0},
										{0,0,1,0,1,0,0,0},
										{1,0,0,0,0,0,1,1},
										{1,0,0,0,0,0,1,1},
										},


										{
										{1,0,0,0,0,0,0,0},	//number X - 4
										{0,1,1,0,0,0,1,1},
										{0,0,1,1,1,1,1,0},
										{0,0,1,1,1,1,0,0},
										{0,0,1,1,1,1,0,0},
										{0,1,1,0,1,1,1,1},
										{1,1,0,0,0,0,1,1},
										{1,0,0,0,0,0,0,0},
										},

										{
										{1,0,0,0,0,0,0,0},	//number X -5
										{1,1,0,0,0,0,1,1},
										{0,1,1,0,0,1,1,0},
										{0,0,1,1,1,1,0,0},
										{0,0,1,1,1,1,0,0},
										{0,1,1,0,1,1,1,0},
										{1,1,0,0,0,0,1,1},
										{1,0,0,0,0,0,0,0},
										},//exit

										{
										{0,0,0,0,0,1,1,1},
										{0,0,0,0,1,1,1,0},
										{0,0,0,1,1,1,0,0},
										{0,0,1,1,1,0,0,0},
										{0,0,1,1,0,0,0,0},
										{1,1,1,0,0,0,0,0},
										{1,0,0,0,0,0,0,0},
										{1,0,0,0,0,0,0,0}
										},

										{
										{0,0,0,0,0,0,1,1},
										{0,0,0,0,0,1,1,0},
										{0,0,0,0,1,1,0,0},
										{0,0,1,1,1,1,0,0},
										{0,0,1,1,0,0,0,0},
										{0,0,1,0,0,0,0,0},
										{1,0,0,0,0,0,0,0},
										{1,0,0,0,0,0,0,0}
										},//backspace




									};

int get_largest_number(int numberOfSame[]){

	int i;
	int tempNumber;

	tempNumber = numberOfSame[0];

	for(i=0; i<10; i++){
		if(numberOfSame[i] > tempNumber)
			tempNumber	= numberOfSame[i];
	}

	return tempNumber;
}

void zero(){
	command=ZERO;
}

void one(){
	command=ONE;
}

void two(){
	command=TWO;
}

void three(){
	command=THREE;
}

void four(){
	command=FOUR;
}

void five(){
	command=FIVE;
}

void six(){
	command=SIX;
}

void seven(){
	command=SEVEN;
}

void eight(){
	command=EIGHT;
}

void nine(){
	command=NINE;
}

void out(){
	command=EXIT;
}

void backspace(){
	command=BS;
}

void initialize_array(int array[8][8]){
	int i=0;
	int j=0;
	while(i<8){
		j=0;
		while(j<8){
			array[i][j]=0;
			j++;
		}
		i++;
	}
}

void recognise_number(){

	int i, j, k;
	int first=-1;
	int second=-1;
	int repeat = 0;
	int countx = 0;
	int county = 15;
	int number[8][8];

	initialize_array(number);


	init_motion();

	GPIO_ClearValue(0, 1<<19);
	GPIO_ClearValue(0, 1<<20);
	GPIO_ClearValue(0, 1<<21);
	GPIO_ClearValue(0, 1<<22);

	while(repeat<=10000){

		if(pin(x, countx)==1){
			first=countx;
			repeat=0;
		}
		if(county < 23 && pin(y, county)==1){
			second=county-15;
			repeat=0;
		}
		if(county >= 23 && pin(y, county)==1){
			second=county-19;
			repeat=0;
		}

		//printf("%d %d\n", first, second);
		if(first!=-1 && second!=-1){
			number[second][first]=1;
			first=-1;
			second=-1;
		}

		countx++;
		county++;

		if(countx>7){
			countx=0;
			repeat++;
		}

		if(county>26){
			county=15;
			repeat++;
		}

		if(repeat>10000){
			first=-1;
			second=-1;
		}
		//printf("repeat is %d\n", repeat);

	}

	//Check for input
	int got_input = 0;
	int counter = 0;

	for(i=0; i<8; i++){
		for(j=0; j<8; j++){
			if (number[i][j] == 1)
				got_input = 1;
		}
	}
	if (got_input == 0){
		command=IDLE;
		return;
	}


	for(i=0; i<8; i++){
		for(j=0; j<8; j++){
			if (number[i][j] == 1)
				counter++;
		}
	}
	if (counter > 30){
		printf("Invalid. Re-draw\n");
		return;
	}

	//Print the pattern
/*
	for(i=0; i<8; i++){
		for(j=0; j<8; j++){
			printf("%d",number[i][j]);
		}
		printf("\n");
	}
*/

	//Find count of one and count of zero for a specific number
	double numberOfOne[57] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
	double numberOfZero[57] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};

	//3D array: count number of one
	for(k=0; k<57; k++){
		for(i=0; i<8; i++){
			for(j=0; j<8; j++){
				if (1==defined_number[k][j][i])
					numberOfOne[k]++;
				if(0==defined_number[k][j][i])
					numberOfZero[k]++;
			}
		}
	}

	//Find matches of one and zero from the input, for calculation of the score
	double numberScore[57];
	double numberOfSameOne[57] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
	double numberOfSameZero[57] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};


	//3D array
	for(k=0; k<57; k++){
		for(i=0; i<8; i++){
			for(j=0; j<8; j++){
				if(number[j][i] == defined_number[k][j][i]){
					if(number[j][i] == 0)
						numberOfSameZero[k] += 1;
					else
						numberOfSameOne[k] += 1;
				}
			}
		}
	}

	//Formula
	double Importance_Of_One = 1.0;
	double Importance_Of_Zero = 0.75;
	for (i=0;i<57;i++)
		numberScore[i] = ((Importance_Of_One*numberOfSameOne[i]/numberOfOne[i]) * (Importance_Of_Zero*numberOfSameZero[i]/numberOfZero[i]));

	//Find largest score
	double largest_score = 0;
	int NumberOne_Number = -1;

	for( i=0;i<57;i++)
	{
		if (largest_score < numberScore[i])
		{
			largest_score =  numberScore[i];
			NumberOne_Number = i;
		}
	}

	//Scoring Inforamtion and Counti information
/*
	for( i=0;i<50;i++){
		printf("%d One-count is %.2f / %.2f,Zero-count is %.2f / %.2f. (Score : %.4f)\n",i,numberOfSameOne[i],numberOfOne[i], numberOfSameZero[i],numberOfZero[i],numberScore[i]);
	}
*/

	if(NumberOne_Number<5){
		zero();
		printf("The largest Number is 0, with score of %.10f\n", largest_score);
	}

	else if(NumberOne_Number>=5 && NumberOne_Number<10){
		one();
		printf("The largest Number is 1, with score of %.10f\n", largest_score);
	}

	else if(NumberOne_Number>=10 && NumberOne_Number<15){
		two();
		printf("The largest Number is 2, with score of %.10f\n", largest_score);
	}

	else if(NumberOne_Number>=15 && NumberOne_Number<20){
		three();
		printf("The largest Number is 3, with score of %.10f\n", largest_score);
	}

	else if(NumberOne_Number>=20 && NumberOne_Number<25){
		four();
		printf("The largest Number is 4, with score of %.10f\n", largest_score);
	}

	else if(NumberOne_Number>=25 && NumberOne_Number<30){
		five();
		printf("The largest Number is 5, with score of %.10f\n", largest_score);
	}

	else if(NumberOne_Number>=30 && NumberOne_Number<35){
		six();
		printf("The largest Number is 6, with score of %.10f\n", largest_score);
	}

	else if(NumberOne_Number>=35 && NumberOne_Number<40){
		seven();
		printf("The largest Number is 7, with score of %.10f\n", largest_score);
	}

	else if(NumberOne_Number>=40 && NumberOne_Number<45){
		eight();
		printf("The largest Number is 8, with score of %.10f\n", largest_score);
	}

	else if(NumberOne_Number>=45 && NumberOne_Number<50){
		nine();
		printf("The largest Number is 9, with score of %.10f\n", largest_score);
	}

	else if (NumberOne_Number>=50 && NumberOne_Number<55){
		out();
		printf("The largest Number is X, with score of %.10f\n", largest_score);
	}

	else if (NumberOne_Number>=55 && NumberOne_Number<58){
		backspace();
		printf("The largest Number is backspace, with score of %.10f\n", largest_score);
	}

	else{
		command=IDLE;
	}

	initialize_array(number);

}

int command_symbol(){
	return command;
}
